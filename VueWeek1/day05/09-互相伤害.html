<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
</head>
<body>



<div id="app">
	<one></one>

	<hr>

	<two></two>
</div>


<template id="one">
	<div>
		<h2>组件一</h2>
		<div>{{score}}</div>
		<div>
			<button @click="hurd2">让对方受到1点伤害</button>
		</div>
	</div>
</template>


<template id="two">
	<div>
		<h2>组件二</h2>
		<div>{{score}}</div>
		<div>
			<button @click="hurd1">让对方受到2点伤害</button>
		</div>
	</div>
</template>


<script type="text/javascript" src="./node_modules/vue/dist/vue.js"></script>

<script type="text/javascript">
	
	var bus = new Vue();

	Vue.component('one',{
		template:'#one',
		data(){
			return {
				score:100
			}
		},
		methods:{
			hurd2(){
				bus.$emit('hurd2',1)
			}
		},
		mounted(){
			var that = this;
			bus.$on('hurd1',function(val){
				that.score -= val
			})
		}
	})

	Vue.component('two',{
		template:'#two',
		data(){
			return {
				score:100
			}
		},
		mounted(){
			var that = this;
			bus.$on('hurd2',function(val){
				that.score -= val
			})
		},
		methods:{
			hurd1(){
				bus.$emit('hurd1',2)
			}
		}
	})





	new Vue({
		el:'#app'
	})


</script>

</body>
</html>